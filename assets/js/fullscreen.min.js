!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=11)}([function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _$=window.jQuery;exports.$=_$},function(module,exports){"use strict";function testCode(r,resolve,reject){r.code?reject(r):resolve(r)}exports.__esModule=!0,exports.default=testCode},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function render(instance){function update(){autoHeight&&instance.node.height(Math.round(.75*instance.node.width())),widget.height(instance.node.height()-(widget.offset().top-instance.node.offset().top))}var autoHeight=instance.node.height()<100;instance.node.html(""),instance.title&&instance.node.append('<div class="book-heading"><h3>'+instance.post.title+"</h3></div>"),instance.node.append('<div class="book-widget"><div class="full-size"></div></div>');var widget=instance.node.find(".book-widget");(0,_libs.$)(window).on("resize",update),update(),(0,_libs.$)(function(){return instance.node.find(".book-widget div").FlipBook((0,_buildOptions2.default)(instance))})}for(var _libs=__webpack_require__(0),_createInstance=__webpack_require__(6),_createInstance2=_interopRequireDefault(_createInstance),_fetchBookCtrlProps=__webpack_require__(7),_fetchBookCtrlProps2=_interopRequireDefault(_fetchBookCtrlProps),_fetchPost=__webpack_require__(9),_fetchPost2=_interopRequireDefault(_fetchPost),_fetchPages=__webpack_require__(8),_fetchPages2=_interopRequireDefault(_fetchPages),_buildOptions=__webpack_require__(5),_buildOptions2=_interopRequireDefault(_buildOptions),_renderError=__webpack_require__(10),_renderError2=_interopRequireDefault(_renderError),nodes=(0,_libs.$)("."+FB3D_CLIENT_LOCALE.key),_loop=function(i){var node=(0,_libs.$)(nodes[i]);"fullscreen"===node.attr("data-mode")&&!function(){var instance=(0,_createInstance2.default)(node);Promise.all([(0,_fetchBookCtrlProps2.default)(instance),(0,_fetchPost2.default)(instance),(0,_fetchPages2.default)(instance)]).then(function(){return render(instance)}).catch(function(r){return(0,_renderError2.default)(node,instance,r)})}()},i=0;i<nodes.length;++i)_loop(i)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(4);_libs.PDFJS.workerSrc=(window.PDFJS_LOCALE?PDFJS_LOCALE:GLOBAL_PATHS).pdfJsWorker;var Pdf=function(){function Pdf(src,loadingProgress){var _this=this;_classCallCheck(this,Pdf),this.src=src,this.handlerQueue=[],this.progresData={loaded:-1,total:1},this.loadingProgress=loadingProgress,_libs.PDFJS.getDocument(src,null,null,function(data){if(_this.loadingProgress){var cur=Math.floor(100*data.loaded/data.total),old=Math.floor(100*_this.progresData.loaded/_this.progresData.total);cur!==old&&(cur=isNaN(cur)?0:cur,cur=cur>100?100:cur,_this.loadingProgress(cur))}_this.progresData=data}).then(function(handler){_this.handler=handler;for(var done=Promise.resolve(handler),_loop=function(){if(_isArray){if(_i>=_iterator.length)return"break";_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)return"break";_ref=_i.value}var clb=_ref;done=done.then(function(handler){return clb(handler),handler})},_iterator=_this.handlerQueue.reverse(),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref,_ret=_loop();if("break"===_ret)break}})}return Pdf.prototype.dispose=function(){this.handlerQueue.splice(0,this.handlerQueue.length),delete this.handler},Pdf.prototype.setLoadingProgressClb=function(clb){this.loadingProgress=clb},Pdf.prototype.getPagesNum=function(){return this.handler?this.handler.numPages:void 0},Pdf.getPageSize=function(page){return{width:page.view[2]-page.view[0],height:page.view[3]-page.view[1]}},Pdf.prototype.getHandler=function(clb){this.handler?clb(this.handler):this.handlerQueue.push(clb)},Pdf}();exports.default=Pdf},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _$=window.jQuery,_html2canvas=window.html2canvas,_THREE=window.THREE,_PDFJS=window.PDFJS;exports.$=_$,exports.html2canvas=_html2canvas,exports.THREE=_THREE,exports.PDFJS=_PDFJS},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function parseValue(v){var f=parseFloat(v);return isNaN(f)?v:f}function customiseProps(props,customs){for(var customised={},_iterator=Object.keys(customs),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var name=_ref;"auto"!==customs[name]?customised[name]="object"===_typeof(customs[name])?customiseProps(props[name],customs[name]):parseValue(customs[name]):void 0!==props[name]&&(customised[name]=props[name])}return customised}function buildOptions(instance){function convertProps(props){for(var res={},_iterator2=Object.keys(props),_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var name=_ref2,prop=props[name];"auto"!==prop&&("object"===("undefined"==typeof prop?"undefined":_typeof(prop))?res[name]=convertProps(prop):res[name]=parseValue(prop))}return res}var type=instance.post.type,pages=instance.pages,pdf="pdf"===type?{get:function(){return this.instnce||(this.instnce=new _Pdf2.default(instance.post.data.guid)),this.instnce}}:void 0,pageCallback=function(n){var page=pages[n];return page?{type:page.page_source_type,src:"pdf"===type?pdf.get():page.page_source_data.guid,interactive:"1"===page.page_source_data.interactive,number:parseInt(page.page_number)}:{type:"blank"}};return{pageCallback:pageCallback,pages:pages.length,controlsProps:_extends({},convertProps(instance.bookCtrlProps),{downloadURL:"pdf"===type?instance.post.data.guid:void 0}),autoNavigation:{urlParam:instance.urlparam},propertiesCallback:function(props){return customiseProps(props,instance.post.props)},template:FB3D_CLIENT_LOCALE.templates[instance.template]}}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.default=buildOptions;var _Pdf=__webpack_require__(3),_Pdf2=_interopRequireDefault(_Pdf)},function(module,exports){"use strict";function createInstance(node){var id=parseInt(node.attr("data-id")),title="true"===node.attr("data-title"),template=node.attr("data-template"),lightbox=node.attr("data-lightbox"),urlparam=node.attr("data-urlparam");return{id:id,title:title,template:template,node:node,lightbox:lightbox,urlparam:urlparam}}exports.__esModule=!0,exports.default=createInstance},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function fetchBookCtrlProps(instance){return new Promise(function(resolve,reject){var fb3d=window.fb3d=_extends({},window.fb3d);fb3d.bookCtrlProps?fb3d.bookCtrlProps.props?(instance.bookCtrlProps=fb3d.bookCtrlProps.props,resolve()):fb3d.bookCtrlProps.queue.push(function(props){instance.bookCtrlProps=props,resolve()}):(fb3d.bookCtrlProps={queue:[]},_libs.$.ajax({url:FB3D_CLIENT_LOCALE.ajaxurl,data:{action:"fb3d_send_book_control_props"},type:"GET",success:function(r){return(0,_testCode2.default)(r,function(r){instance.bookCtrlProps=r.props,fb3d.bookCtrlProps.props=r.props;for(var _iterator=fb3d.bookCtrlProps.queue,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var clb=_ref;clb(r.props)}resolve()},reject)},error:reject}))})}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=fetchBookCtrlProps;var _libs=__webpack_require__(0),_testCode=__webpack_require__(1),_testCode2=_interopRequireDefault(_testCode)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function fetchThumbnailInfo(instance){return new Promise(function(resolve,reject){_libs.$.ajax({url:FB3D_CLIENT_LOCALE.ajaxurl,data:{action:"fb3d_send_post_pages",id:instance.id},type:"GET",success:function(r){return(0,_testCode2.default)(r,function(r){instance.pages=r.pages,resolve()},reject)},error:reject})})}exports.__esModule=!0,exports.default=fetchThumbnailInfo;var _libs=__webpack_require__(0),_testCode=__webpack_require__(1),_testCode2=_interopRequireDefault(_testCode)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function fetchPost(instance){var thumbnailUrl=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(resolve,reject){_libs.$.ajax({url:FB3D_CLIENT_LOCALE.ajaxurl,data:{action:"fb3d_send_post",id:instance.id,thumbnailUrl:thumbnailUrl},type:"GET",success:function(r){return(0,_testCode2.default)(r,function(r){instance.post=r.post,resolve()},reject)},error:reject})})}exports.__esModule=!0,exports.default=fetchPost;var _libs=__webpack_require__(0),_testCode=__webpack_require__(1),_testCode2=_interopRequireDefault(_testCode)},function(module,exports){"use strict";function renderError(node,instance,r){console.error(r),node.html('\n    <div class="alert alert-danger">\n      <span class="fa fa-exclamation-circle"></span> Item is not found\n    </div>\n  ')}exports.__esModule=!0,exports.default=renderError},function(module,exports,__webpack_require__){module.exports=__webpack_require__(2)}]);